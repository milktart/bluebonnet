<!-- Item Companions Display Section -->
<% if (typeof companions !== 'undefined' && companions && companions.length > 0) { %>
  <div class="card shadow mb-4">
    <div class="card-header bg-light border-bottom">
      <h5 class="mb-0">
        <span class="material-symbols-outlined" style="display: inline-block; font-size: 18px; margin-right: 8px; vertical-align: middle;">group</span>Travelers
      </h5>
    </div>
    <div class="card-body">
      <div class="list-group list-group-flush">
        <% companions.forEach((companion, index) => { %>
          <div class="list-group-item d-flex justify-content-between align-items-center py-3 <%= index === 0 ? '' : 'border-top' %>">
            <div class="flex-grow-1">
              <h6 class="mb-1"><%= companion.name || companion.email %></h6>
              <p class="text-muted small mb-0"><%= companion.email %></p>
            </div>

            <div class="ms-3">
              <% if (companion.status === 'not_attending') { %>
                <span class="badge bg-secondary">
                  <i class="bi bi-x-circle me-1"></i>Not Attending
                </span>
              <% } else if (companion.inheritedFromTrip) { %>
                <span class="badge bg-info">
                  <i class="bi bi-arrow-down-circle me-1"></i>Trip Companion
                </span>
              <% } else { %>
                <span class="badge bg-success">
                  <i class="bi bi-check-circle me-1"></i>Attending
                </span>
              <% } %>
            </div>
          </div>
        <% }); %>
      </div>
    </div>
  </div>
<% } %>
