<!-- Edit Modals - Using unified form partials -->
<!-- Note: All forms now load via sidebar only -->

<script>
// Form validation and enhancements for edit modals
document.addEventListener('DOMContentLoaded', function() {
  // Validate pick-up/drop-off for car rentals
  const carModal = document.getElementById('editCarRentalModal');
  if (carModal) {
    const pickupDate = carModal.querySelector('[name="pickupDate"]');
    const dropoffDate = carModal.querySelector('[name="dropoffDate"]');

    if (pickupDate && dropoffDate) {
      pickupDate.addEventListener('change', function() {
        dropoffDate.min = this.value;
      });

      dropoffDate.addEventListener('change', function() {
        if (this.value && pickupDate.value && this.value < pickupDate.value) {
          alert('Drop-off date must be after pick-up date');
          this.value = '';
        }
      });
    }
  }

  // Validate start/end for events
  const eventModal = document.getElementById('editEventModal');
  if (eventModal) {
    const startDate = eventModal.querySelector('[name="startDate"]');
    const endDate = eventModal.querySelector('[name="endDate"]');

    if (startDate && endDate) {
      startDate.addEventListener('change', function() {
        endDate.min = this.value;
      });

      endDate.addEventListener('change', function() {
        if (this.value && startDate.value && this.value < startDate.value) {
          alert('End date must be after start date');
          this.value = '';
        }
      });
    }
  }

  // Clear forms when modals are closed
  const modals = document.querySelectorAll('.modal');
  modals.forEach(modal => {
    modal.addEventListener('hidden.bs.modal', function() {
      const form = this.querySelector('form');
      if (form) {
        form.reset();
        // Remove any alerts
        const alerts = this.querySelectorAll('.alert-success, .alert-danger');
        alerts.forEach(alert => alert.remove());
      }
    });
  });
});
</script>
