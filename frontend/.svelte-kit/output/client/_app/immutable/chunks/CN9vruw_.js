import{w as u}from"./DY5-1jsb.js";const r={user:null,isAuthenticated:!1,token:null,loading:!1,error:null},o=u(r),s={setUser(e){o.update(t=>({...t,user:e,isAuthenticated:e!==null}))},setToken(e){o.update(t=>({...t,token:e}))},setLoading(e){o.update(t=>({...t,loading:e}))},setError(e){o.update(t=>({...t,error:e}))},login(e,t){o.update(a=>({...a,user:e,token:t,isAuthenticated:!0,loading:!1,error:null})),typeof window<"u"&&(localStorage.setItem("auth_token",t),localStorage.setItem("auth_user",JSON.stringify(e)))},logout(){o.set(r),typeof window<"u"&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"))},restoreFromStorage(){if(typeof window<"u"){const e=localStorage.getItem("auth_token"),t=localStorage.getItem("auth_user");if(e&&t)try{const a=JSON.parse(t);o.update(n=>({...n,user:a,token:e,isAuthenticated:!0}))}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user")}}},reset(){o.set(r)}};export{s as a,o as b};
